{"version":3,"file":"index.mjs","sources":["../../../node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js","../../../node_modules/decamelize/index.js","../../../node_modules/@langchain/core/node_modules/camelcase/index.js","../../../node_modules/@langchain/core/dist/load/map_keys.js","../../../node_modules/@langchain/core/dist/load/serializable.js","../../../node_modules/@langchain/core/dist/utils/env.js","../../../node_modules/@langchain/core/dist/callbacks/base.js","../src/client.ts","../src/serializer.ts","../src/callback.ts","../src/auto-detection.ts","../src/index.ts"],"sourcesContent":["//#region rolldown:runtime\nvar __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n\tfor (var name in all) __defProp(target, name, {\n\t\tget: all[name],\n\t\tenumerable: true\n\t});\n};\n\n//#endregion\nexport { __export };","'use strict';\nmodule.exports = function (str, sep) {\n\tif (typeof str !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\tsep = typeof sep === 'undefined' ? '_' : sep;\n\n\treturn str\n\t\t.replace(/([a-z\\d])([A-Z])/g, '$1' + sep + '$2')\n\t\t.replace(/([A-Z]+)([A-Z][a-z\\d]+)/g, '$1' + sep + '$2')\n\t\t.toLowerCase();\n};\n","'use strict';\n\nconst UPPERCASE = /[\\p{Lu}]/u;\nconst LOWERCASE = /[\\p{Ll}]/u;\nconst LEADING_CAPITAL = /^[\\p{Lu}](?![\\p{Lu}])/gu;\nconst IDENTIFIER = /([\\p{Alpha}\\p{N}_]|$)/u;\nconst SEPARATORS = /[_.\\- ]+/;\n\nconst LEADING_SEPARATORS = new RegExp('^' + SEPARATORS.source);\nconst SEPARATORS_AND_IDENTIFIER = new RegExp(SEPARATORS.source + IDENTIFIER.source, 'gu');\nconst NUMBERS_AND_IDENTIFIER = new RegExp('\\\\d+' + IDENTIFIER.source, 'gu');\n\nconst preserveCamelCase = (string, toLowerCase, toUpperCase) => {\n\tlet isLastCharLower = false;\n\tlet isLastCharUpper = false;\n\tlet isLastLastCharUpper = false;\n\n\tfor (let i = 0; i < string.length; i++) {\n\t\tconst character = string[i];\n\n\t\tif (isLastCharLower && UPPERCASE.test(character)) {\n\t\t\tstring = string.slice(0, i) + '-' + string.slice(i);\n\t\t\tisLastCharLower = false;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = true;\n\t\t\ti++;\n\t\t} else if (isLastCharUpper && isLastLastCharUpper && LOWERCASE.test(character)) {\n\t\t\tstring = string.slice(0, i - 1) + '-' + string.slice(i - 1);\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = false;\n\t\t\tisLastCharLower = true;\n\t\t} else {\n\t\t\tisLastCharLower = toLowerCase(character) === character && toUpperCase(character) !== character;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = toUpperCase(character) === character && toLowerCase(character) !== character;\n\t\t}\n\t}\n\n\treturn string;\n};\n\nconst preserveConsecutiveUppercase = (input, toLowerCase) => {\n\tLEADING_CAPITAL.lastIndex = 0;\n\n\treturn input.replace(LEADING_CAPITAL, m1 => toLowerCase(m1));\n};\n\nconst postProcess = (input, toUpperCase) => {\n\tSEPARATORS_AND_IDENTIFIER.lastIndex = 0;\n\tNUMBERS_AND_IDENTIFIER.lastIndex = 0;\n\n\treturn input.replace(SEPARATORS_AND_IDENTIFIER, (_, identifier) => toUpperCase(identifier))\n\t\t.replace(NUMBERS_AND_IDENTIFIER, m => toUpperCase(m));\n};\n\nconst camelCase = (input, options) => {\n\tif (!(typeof input === 'string' || Array.isArray(input))) {\n\t\tthrow new TypeError('Expected the input to be `string | string[]`');\n\t}\n\n\toptions = {\n\t\tpascalCase: false,\n\t\tpreserveConsecutiveUppercase: false,\n\t\t...options\n\t};\n\n\tif (Array.isArray(input)) {\n\t\tinput = input.map(x => x.trim())\n\t\t\t.filter(x => x.length)\n\t\t\t.join('-');\n\t} else {\n\t\tinput = input.trim();\n\t}\n\n\tif (input.length === 0) {\n\t\treturn '';\n\t}\n\n\tconst toLowerCase = options.locale === false ?\n\t\tstring => string.toLowerCase() :\n\t\tstring => string.toLocaleLowerCase(options.locale);\n\tconst toUpperCase = options.locale === false ?\n\t\tstring => string.toUpperCase() :\n\t\tstring => string.toLocaleUpperCase(options.locale);\n\n\tif (input.length === 1) {\n\t\treturn options.pascalCase ? toUpperCase(input) : toLowerCase(input);\n\t}\n\n\tconst hasUpperCase = input !== toLowerCase(input);\n\n\tif (hasUpperCase) {\n\t\tinput = preserveCamelCase(input, toLowerCase, toUpperCase);\n\t}\n\n\tinput = input.replace(LEADING_SEPARATORS, '');\n\n\tif (options.preserveConsecutiveUppercase) {\n\t\tinput = preserveConsecutiveUppercase(input, toLowerCase);\n\t} else {\n\t\tinput = toLowerCase(input);\n\t}\n\n\tif (options.pascalCase) {\n\t\tinput = toUpperCase(input.charAt(0)) + input.slice(1);\n\t}\n\n\treturn postProcess(input, toUpperCase);\n};\n\nmodule.exports = camelCase;\n// TODO: Remove this for the next major release\nmodule.exports.default = camelCase;\n","import snakeCase from \"decamelize\";\nimport camelCase from \"camelcase\";\n\n//#region src/load/map_keys.ts\nfunction keyToJson(key, map) {\n\treturn map?.[key] || snakeCase(key);\n}\nfunction keyFromJson(key, map) {\n\treturn map?.[key] || camelCase(key);\n}\nfunction mapKeys(fields, mapper, map) {\n\tconst mapped = {};\n\tfor (const key in fields) if (Object.hasOwn(fields, key)) mapped[mapper(key, map)] = fields[key];\n\treturn mapped;\n}\n\n//#endregion\nexport { keyFromJson, keyToJson, mapKeys };\n//# sourceMappingURL=map_keys.js.map","import { __export } from \"../_virtual/rolldown_runtime.js\";\nimport { keyToJson, mapKeys } from \"./map_keys.js\";\n\n//#region src/load/serializable.ts\nvar serializable_exports = {};\n__export(serializable_exports, {\n\tSerializable: () => Serializable,\n\tget_lc_unique_name: () => get_lc_unique_name\n});\nfunction shallowCopy(obj) {\n\treturn Array.isArray(obj) ? [...obj] : { ...obj };\n}\nfunction replaceSecrets(root, secretsMap) {\n\tconst result = shallowCopy(root);\n\tfor (const [path, secretId] of Object.entries(secretsMap)) {\n\t\tconst [last, ...partsReverse] = path.split(\".\").reverse();\n\t\tlet current = result;\n\t\tfor (const part of partsReverse.reverse()) {\n\t\t\tif (current[part] === void 0) break;\n\t\t\tcurrent[part] = shallowCopy(current[part]);\n\t\t\tcurrent = current[part];\n\t\t}\n\t\tif (current[last] !== void 0) current[last] = {\n\t\t\tlc: 1,\n\t\t\ttype: \"secret\",\n\t\t\tid: [secretId]\n\t\t};\n\t}\n\treturn result;\n}\n/**\n* Get a unique name for the module, rather than parent class implementations.\n* Should not be subclassed, subclass lc_name above instead.\n*/\nfunction get_lc_unique_name(serializableClass) {\n\tconst parentClass = Object.getPrototypeOf(serializableClass);\n\tconst lcNameIsSubclassed = typeof serializableClass.lc_name === \"function\" && (typeof parentClass.lc_name !== \"function\" || serializableClass.lc_name() !== parentClass.lc_name());\n\tif (lcNameIsSubclassed) return serializableClass.lc_name();\n\telse return serializableClass.name;\n}\nvar Serializable = class Serializable {\n\tlc_serializable = false;\n\tlc_kwargs;\n\t/**\n\t* The name of the serializable. Override to provide an alias or\n\t* to preserve the serialized module name in minified environments.\n\t*\n\t* Implemented as a static method to support loading logic.\n\t*/\n\tstatic lc_name() {\n\t\treturn this.name;\n\t}\n\t/**\n\t* The final serialized identifier for the module.\n\t*/\n\tget lc_id() {\n\t\treturn [...this.lc_namespace, get_lc_unique_name(this.constructor)];\n\t}\n\t/**\n\t* A map of secrets, which will be omitted from serialization.\n\t* Keys are paths to the secret in constructor args, e.g. \"foo.bar.baz\".\n\t* Values are the secret ids, which will be used when deserializing.\n\t*/\n\tget lc_secrets() {\n\t\treturn void 0;\n\t}\n\t/**\n\t* A map of additional attributes to merge with constructor args.\n\t* Keys are the attribute names, e.g. \"foo\".\n\t* Values are the attribute values, which will be serialized.\n\t* These attributes need to be accepted by the constructor as arguments.\n\t*/\n\tget lc_attributes() {\n\t\treturn void 0;\n\t}\n\t/**\n\t* A map of aliases for constructor args.\n\t* Keys are the attribute names, e.g. \"foo\".\n\t* Values are the alias that will replace the key in serialization.\n\t* This is used to eg. make argument names match Python.\n\t*/\n\tget lc_aliases() {\n\t\treturn void 0;\n\t}\n\t/**\n\t* A manual list of keys that should be serialized.\n\t* If not overridden, all fields passed into the constructor will be serialized.\n\t*/\n\tget lc_serializable_keys() {\n\t\treturn void 0;\n\t}\n\tconstructor(kwargs, ..._args) {\n\t\tif (this.lc_serializable_keys !== void 0) this.lc_kwargs = Object.fromEntries(Object.entries(kwargs || {}).filter(([key]) => this.lc_serializable_keys?.includes(key)));\n\t\telse this.lc_kwargs = kwargs ?? {};\n\t}\n\ttoJSON() {\n\t\tif (!this.lc_serializable) return this.toJSONNotImplemented();\n\t\tif (this.lc_kwargs instanceof Serializable || typeof this.lc_kwargs !== \"object\" || Array.isArray(this.lc_kwargs)) return this.toJSONNotImplemented();\n\t\tconst aliases = {};\n\t\tconst secrets = {};\n\t\tconst kwargs = Object.keys(this.lc_kwargs).reduce((acc, key) => {\n\t\t\tacc[key] = key in this ? this[key] : this.lc_kwargs[key];\n\t\t\treturn acc;\n\t\t}, {});\n\t\tfor (let current = Object.getPrototypeOf(this); current; current = Object.getPrototypeOf(current)) {\n\t\t\tObject.assign(aliases, Reflect.get(current, \"lc_aliases\", this));\n\t\t\tObject.assign(secrets, Reflect.get(current, \"lc_secrets\", this));\n\t\t\tObject.assign(kwargs, Reflect.get(current, \"lc_attributes\", this));\n\t\t}\n\t\tObject.keys(secrets).forEach((keyPath) => {\n\t\t\tlet read = this;\n\t\t\tlet write = kwargs;\n\t\t\tconst [last, ...partsReverse] = keyPath.split(\".\").reverse();\n\t\t\tfor (const key of partsReverse.reverse()) {\n\t\t\t\tif (!(key in read) || read[key] === void 0) return;\n\t\t\t\tif (!(key in write) || write[key] === void 0) {\n\t\t\t\t\tif (typeof read[key] === \"object\" && read[key] != null) write[key] = {};\n\t\t\t\t\telse if (Array.isArray(read[key])) write[key] = [];\n\t\t\t\t}\n\t\t\t\tread = read[key];\n\t\t\t\twrite = write[key];\n\t\t\t}\n\t\t\tif (last in read && read[last] !== void 0) write[last] = write[last] || read[last];\n\t\t});\n\t\treturn {\n\t\t\tlc: 1,\n\t\t\ttype: \"constructor\",\n\t\t\tid: this.lc_id,\n\t\t\tkwargs: mapKeys(Object.keys(secrets).length ? replaceSecrets(kwargs, secrets) : kwargs, keyToJson, aliases)\n\t\t};\n\t}\n\ttoJSONNotImplemented() {\n\t\treturn {\n\t\t\tlc: 1,\n\t\t\ttype: \"not_implemented\",\n\t\t\tid: this.lc_id\n\t\t};\n\t}\n};\n\n//#endregion\nexport { Serializable, get_lc_unique_name, serializable_exports };\n//# sourceMappingURL=serializable.js.map","import { __export } from \"../_virtual/rolldown_runtime.js\";\n\n//#region src/utils/env.ts\nvar env_exports = {};\n__export(env_exports, {\n\tgetEnv: () => getEnv,\n\tgetEnvironmentVariable: () => getEnvironmentVariable,\n\tgetRuntimeEnvironment: () => getRuntimeEnvironment,\n\tisBrowser: () => isBrowser,\n\tisDeno: () => isDeno,\n\tisJsDom: () => isJsDom,\n\tisNode: () => isNode,\n\tisWebWorker: () => isWebWorker\n});\nconst isBrowser = () => typeof window !== \"undefined\" && typeof window.document !== \"undefined\";\nconst isWebWorker = () => typeof globalThis === \"object\" && globalThis.constructor && globalThis.constructor.name === \"DedicatedWorkerGlobalScope\";\nconst isJsDom = () => typeof window !== \"undefined\" && window.name === \"nodejs\" || typeof navigator !== \"undefined\" && navigator.userAgent.includes(\"jsdom\");\nconst isDeno = () => typeof Deno !== \"undefined\";\nconst isNode = () => typeof process !== \"undefined\" && typeof process.versions !== \"undefined\" && typeof process.versions.node !== \"undefined\" && !isDeno();\nconst getEnv = () => {\n\tlet env;\n\tif (isBrowser()) env = \"browser\";\n\telse if (isNode()) env = \"node\";\n\telse if (isWebWorker()) env = \"webworker\";\n\telse if (isJsDom()) env = \"jsdom\";\n\telse if (isDeno()) env = \"deno\";\n\telse env = \"other\";\n\treturn env;\n};\nlet runtimeEnvironment;\nfunction getRuntimeEnvironment() {\n\tif (runtimeEnvironment === void 0) {\n\t\tconst env = getEnv();\n\t\truntimeEnvironment = {\n\t\t\tlibrary: \"langchain-js\",\n\t\t\truntime: env\n\t\t};\n\t}\n\treturn runtimeEnvironment;\n}\nfunction getEnvironmentVariable(name) {\n\ttry {\n\t\tif (typeof process !== \"undefined\") return process.env?.[name];\n\t\telse if (isDeno()) return Deno?.env.get(name);\n\t\telse return void 0;\n\t} catch {\n\t\treturn void 0;\n\t}\n}\n\n//#endregion\nexport { env_exports, getEnv, getEnvironmentVariable, getRuntimeEnvironment, isBrowser, isDeno, isJsDom, isNode, isWebWorker };\n//# sourceMappingURL=env.js.map","import { __export } from \"../_virtual/rolldown_runtime.js\";\nimport { Serializable, get_lc_unique_name } from \"../load/serializable.js\";\nimport { getEnvironmentVariable } from \"../utils/env.js\";\nimport * as uuid from \"uuid\";\n\n//#region src/callbacks/base.ts\nvar base_exports = {};\n__export(base_exports, {\n\tBaseCallbackHandler: () => BaseCallbackHandler,\n\tcallbackHandlerPrefersStreaming: () => callbackHandlerPrefersStreaming,\n\tisBaseCallbackHandler: () => isBaseCallbackHandler\n});\n/**\n* Abstract class that provides a set of optional methods that can be\n* overridden in derived classes to handle various events during the\n* execution of a LangChain application.\n*/\nvar BaseCallbackHandlerMethodsClass = class {};\nfunction callbackHandlerPrefersStreaming(x) {\n\treturn \"lc_prefer_streaming\" in x && x.lc_prefer_streaming;\n}\n/**\n* Abstract base class for creating callback handlers in the LangChain\n* framework. It provides a set of optional methods that can be overridden\n* in derived classes to handle various events during the execution of a\n* LangChain application.\n*/\nvar BaseCallbackHandler = class extends BaseCallbackHandlerMethodsClass {\n\tlc_serializable = false;\n\tget lc_namespace() {\n\t\treturn [\n\t\t\t\"langchain_core\",\n\t\t\t\"callbacks\",\n\t\t\tthis.name\n\t\t];\n\t}\n\tget lc_secrets() {\n\t\treturn void 0;\n\t}\n\tget lc_attributes() {\n\t\treturn void 0;\n\t}\n\tget lc_aliases() {\n\t\treturn void 0;\n\t}\n\tget lc_serializable_keys() {\n\t\treturn void 0;\n\t}\n\t/**\n\t* The name of the serializable. Override to provide an alias or\n\t* to preserve the serialized module name in minified environments.\n\t*\n\t* Implemented as a static method to support loading logic.\n\t*/\n\tstatic lc_name() {\n\t\treturn this.name;\n\t}\n\t/**\n\t* The final serialized identifier for the module.\n\t*/\n\tget lc_id() {\n\t\treturn [...this.lc_namespace, get_lc_unique_name(this.constructor)];\n\t}\n\tlc_kwargs;\n\tignoreLLM = false;\n\tignoreChain = false;\n\tignoreAgent = false;\n\tignoreRetriever = false;\n\tignoreCustomEvent = false;\n\traiseError = false;\n\tawaitHandlers = getEnvironmentVariable(\"LANGCHAIN_CALLBACKS_BACKGROUND\") === \"false\";\n\tconstructor(input) {\n\t\tsuper();\n\t\tthis.lc_kwargs = input || {};\n\t\tif (input) {\n\t\t\tthis.ignoreLLM = input.ignoreLLM ?? this.ignoreLLM;\n\t\t\tthis.ignoreChain = input.ignoreChain ?? this.ignoreChain;\n\t\t\tthis.ignoreAgent = input.ignoreAgent ?? this.ignoreAgent;\n\t\t\tthis.ignoreRetriever = input.ignoreRetriever ?? this.ignoreRetriever;\n\t\t\tthis.ignoreCustomEvent = input.ignoreCustomEvent ?? this.ignoreCustomEvent;\n\t\t\tthis.raiseError = input.raiseError ?? this.raiseError;\n\t\t\tthis.awaitHandlers = this.raiseError || (input._awaitHandler ?? this.awaitHandlers);\n\t\t}\n\t}\n\tcopy() {\n\t\treturn new this.constructor(this);\n\t}\n\ttoJSON() {\n\t\treturn Serializable.prototype.toJSON.call(this);\n\t}\n\ttoJSONNotImplemented() {\n\t\treturn Serializable.prototype.toJSONNotImplemented.call(this);\n\t}\n\tstatic fromMethods(methods) {\n\t\tclass Handler extends BaseCallbackHandler {\n\t\t\tname = uuid.v4();\n\t\t\tconstructor() {\n\t\t\t\tsuper();\n\t\t\t\tObject.assign(this, methods);\n\t\t\t}\n\t\t}\n\t\treturn new Handler();\n\t}\n};\nconst isBaseCallbackHandler = (x) => {\n\tconst callbackHandler = x;\n\treturn callbackHandler !== void 0 && typeof callbackHandler.copy === \"function\" && typeof callbackHandler.name === \"string\" && typeof callbackHandler.awaitHandlers === \"boolean\";\n};\n\n//#endregion\nexport { BaseCallbackHandler, base_exports, callbackHandlerPrefersStreaming, isBaseCallbackHandler };\n//# sourceMappingURL=base.js.map","/**\n * WebSocket client for sending trace events to backend\n */\n\nimport { io, Socket } from \"socket.io-client\";\nimport { TraceConfig, TraceEvent } from \"./types\";\n\nexport class TraceClient {\n  private socket: Socket | null = null;\n  private config: TraceConfig;\n  private connected: boolean = false;\n  private eventQueue: TraceEvent[] = [];\n  private reconnectAttempts: number = 0;\n  private maxReconnectAttempts: number = 5;\n  private batchTimer: NodeJS.Timeout | null = null;\n\n  constructor(config: Partial<TraceConfig>) {\n    this.config = {\n      batchInterval: 100,\n      batchSize: 50,\n      debug: false,\n      projectName: \"default\",\n      endpoint: \"http://localhost:8000\",\n      ...config\n    } as TraceConfig;\n\n    this.connect();\n  }\n\n  /**\n   * Connect to WebSocket server\n   */\n  private connect(): void {\n    try {\n      console.log(\n        `[AgentTrace] Attempting connection to ${this.config.endpoint}...`\n      );\n\n      this.socket = io(this.config.endpoint, {\n        auth: {\n          apiKey: this.config.apiKey,\n          projectName: this.config.projectName\n        },\n        transports: [\"websocket\", \"polling\"], // üëà Add polling fallback\n        reconnection: true,\n        reconnectionAttempts: this.maxReconnectAttempts,\n        reconnectionDelay: 1000,\n        timeout: 5000 // üëà Add timeout\n      });\n\n      this.socket.on(\"connect\", () => {\n        this.connected = true;\n        this.reconnectAttempts = 0;\n        console.log(`[AgentTrace] ‚úÖ Connected! Socket ID: ${this.socket?.id}`);\n\n        // Flush queued events\n        this.flushQueue();\n      });\n\n      this.socket.on(\"disconnect\", (reason) => {\n        this.connected = false;\n        console.log(`[AgentTrace] ‚ö†Ô∏è  Disconnected: ${reason}`);\n      });\n\n      this.socket.on(\"connect_error\", (error) => {\n        this.reconnectAttempts++;\n        console.error(\n          `[AgentTrace] ‚ùå Connection error (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts}):`,\n          error.message\n        );\n        console.error(\n          `[AgentTrace] Trying to connect to: ${this.config.endpoint}`\n        );\n\n        if (this.reconnectAttempts >= this.maxReconnectAttempts) {\n          console.error(\n            \"[AgentTrace] ‚ö†Ô∏è  Max reconnection attempts reached. Events will be queued.\"\n          );\n        }\n      });\n\n      this.socket.on(\"error\", (error) => {\n        console.error(`[AgentTrace] ‚ùå Socket error:`, error);\n      });\n\n      // üëá Add these listeners\n      this.socket.io.on(\"error\", (error) => {\n        console.error(`[AgentTrace] ‚ùå IO error:`, error);\n      });\n\n      this.socket.io.on(\"reconnect_attempt\", (attempt) => {\n        console.log(`[AgentTrace] üîÑ Reconnect attempt ${attempt}...`);\n      });\n\n      this.socket.io.on(\"reconnect_failed\", () => {\n        console.error(\n          `[AgentTrace] ‚ùå Reconnection failed after ${this.maxReconnectAttempts} attempts`\n        );\n      });\n\n      // Start batch timer\n      this.startBatchTimer();\n    } catch (error) {\n      console.error(`[AgentTrace] ‚ùå Failed to create socket:`, error);\n    }\n  }\n\n  /**\n   * Send event to backend\n   */\n  public async sendEvent(event: TraceEvent): Promise<void> {\n    this.eventQueue.push(event);\n\n    // Send immediately if batch size reached\n    if (this.eventQueue.length >= this.config.batchSize!) {\n      this.flushQueue();\n    }\n\n    // Return immediately - actual sending happens asynchronously\n    return Promise.resolve();\n  }\n\n  /**\n   * Start batch timer to flush events periodically\n   */\n  private startBatchTimer(): void {\n    if (this.batchTimer) {\n      clearInterval(this.batchTimer);\n    }\n\n    this.batchTimer = setInterval(() => {\n      if (this.eventQueue.length > 0) {\n        this.flushQueue();\n      }\n    }, this.config.batchInterval);\n  }\n\n  /**\n   * Flush queued events to server\n   */\n  private flushQueue(): void {\n    console.log(\"flushQueue is running\");\n    if (this.eventQueue.length === 0) return;\n\n    const events = [...this.eventQueue];\n    this.eventQueue = [];\n\n    // In flushQueue() method, update to:\n    if (this.connected && this.socket) {\n      this.socket.emit(\"trace_events\", events, (response: any) => {\n        if (response?.error) {\n          this.log(`‚ùå Server error: ${response.error}`);\n          // Re-queue failed events\n          this.eventQueue.unshift(...events);\n        } else {\n          this.log(`‚úÖ ${events.length} events acknowledged`);\n        }\n      });\n      this.log(`üì§ Sent ${events.length} events`);\n    } else {\n      // Re-queue if not connected\n      this.eventQueue.unshift(...events);\n      this.log(`‚è≥ Queued ${events.length} events (not connected)`);\n    }\n  }\n\n  /**\n   * Disconnect and cleanup\n   */\n  public disconnect(): void {\n    // Flush remaining events\n    this.flushQueue();\n\n    if (this.batchTimer) {\n      clearInterval(this.batchTimer);\n      this.batchTimer = null;\n    }\n\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n    }\n\n    this.connected = false;\n  }\n\n  /**\n   * Check if connected\n   */\n  public isConnected(): boolean {\n    return this.connected;\n  }\n\n  /**\n   * Get queue size\n   */\n  public getQueueSize(): number {\n    return this.eventQueue.length;\n  }\n\n  /**\n   * Debug logging\n   */\n  private log(message: string): void {\n    if (this.config.debug) {\n      console.log(`[AgentTrace] ${message}`);\n    }\n  }\n}\n","/**\n * Serialize LangChain data for transmission\n */\n\nimport { LLMResult } from \"@langchain/core/outputs\";\nimport { Serialized } from \"@langchain/core/load/serializable\";\n\nexport class EventSerializer {\n  /**\n   * Serialize LLM result\n   */\n  static serializeLLMResult(result: LLMResult): {\n    response: string;\n    tokens: { prompt: number; completion: number; total: number };\n  } {\n    const generations = result.generations[0];\n    const response = generations?.[0]?.text || \"\";\n\n    const tokenUsage = result.llmOutput?.tokenUsage || {};\n    const tokens = {\n      prompt: tokenUsage.promptTokens || 0,\n      completion: tokenUsage.completionTokens || 0,\n      total: tokenUsage.totalTokens || 0\n    };\n\n    return { response, tokens };\n  }\n\n  /**\n   * Serialize serialized object (model info, etc)\n   */\n  static serializeSerialized(serialized: Serialized): {\n    type: string;\n    name: string;\n    params: Record<string, any>;\n  } {\n    console.log(serialized, \"serialized\");\n    return {\n      type: String(serialized.lc || \"unknown\"),\n      name: serialized.id?.[serialized.id.length - 1] || \"unknown\",\n      params: (\"kwargs\" in serialized ? serialized.kwargs : {}) || {}\n    };\n  }\n\n  /**\n   * Serialize tool input (can be string or object)\n   */\n  static serializeToolInput(\n    input: string | Record<string, any>\n  ): string | Record<string, any> {\n    if (typeof input === \"string\") {\n      return input;\n    }\n\n    try {\n      // Remove non-serializable properties\n      return JSON.parse(JSON.stringify(input));\n    } catch (error) {\n      return String(input);\n    }\n  }\n\n  /**\n   * Calculate cost based on tokens and model\n   */\n  static calculateCost(\n    model: string,\n    tokens: { prompt: number; completion: number; total: number }\n  ): number {\n    const pricing: Record<string, { input: number; output: number }> = {\n      \"gpt-4\": { input: 0.03, output: 0.06 },\n      \"gpt-4-turbo\": { input: 0.01, output: 0.03 },\n      \"gpt-3.5-turbo\": { input: 0.0015, output: 0.002 },\n      \"claude-3-opus\": { input: 0.015, output: 0.075 },\n      \"claude-3-sonnet\": { input: 0.003, output: 0.015 },\n      \"claude-3-haiku\": { input: 0.00025, output: 0.00125 }\n    };\n\n    const rates = pricing[model] || pricing[\"gpt-3.5-turbo\"];\n\n    // If we have actual token counts, use them\n    if (tokens.prompt > 0 || tokens.completion > 0) {\n      return (\n        (tokens.prompt / 1000) * rates.input +\n        (tokens.completion / 1000) * rates.output\n      );\n    }\n\n    // If no token data, return a minimal cost to indicate the operation happened\n    return 0.0001; // $0.0001 as a base cost for any LLM operation\n  }\n\n  /**\n   * Calculate cost for tool operations\n   */\n  static calculateToolCost(toolName: string, latency: number): number {\n    // Tools typically have minimal costs, but we can estimate based on complexity\n    const toolCosts: Record<string, number> = {\n      \"search\": 0.00005,      // Search operations\n      \"calculator\": 0.00001,  // Simple calculations\n      \"weather\": 0.00002,     // API calls\n      \"web_search\": 0.00005,  // Web search\n      \"file_read\": 0.00001,   // File operations\n      \"database\": 0.00003     // Database queries\n    };\n\n    const baseCost = toolCosts[toolName] || 0.00002; // Default cost for unknown tools\n    \n    // Add a small latency-based cost (longer operations cost slightly more)\n    const latencyCost = Math.min(latency / 1000000, 0.00001); // Max $0.00001 for latency\n    \n    return baseCost + latencyCost;\n  }\n\n  /**\n   * Extract model name from serialized data\n   */\n  static extractModelName(serialized: Serialized): string {\n    const params = (\"kwargs\" in serialized ? serialized.kwargs : {}) || {};\n    return params.model_name || params.model || \"unknown\";\n  }\n\n  /**\n   * Safely stringify error\n   */\n  static serializeError(error: Error): { message: string; stack?: string } {\n    return {\n      message: error.message,\n      stack: error.stack\n    };\n  }\n}\n","/**\n * LangChain callback handler for tracing agent execution\n */\n\nimport { BaseCallbackHandler } from \"@langchain/core/callbacks/base\";\nimport { LLMResult } from \"@langchain/core/outputs\";\nimport { Serialized } from \"@langchain/core/load/serializable\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { TraceClient } from \"./client\";\nimport { EventSerializer } from \"./serializer\";\nimport {\n  TraceConfig,\n  RunData,\n  LLMStartEvent,\n  LLMEndEvent,\n  ToolStartEvent,\n  ToolEndEvent,\n  ChainStartEvent,\n  ChainEndEvent,\n  ErrorEvent,\n  TextEvent,\n  AgentActionEvent,\n  AgentEndEvent,\n  RetrieverStartEvent,\n  RetrieverEndEvent\n} from \"./types\";\n\n/**\n * LangChain callback handler for tracing agent execution\n * \n * This class extends LangChain's BaseCallbackHandler to automatically capture\n * and send trace events to the Agent Trace Visualizer backend. It tracks:\n * - LLM start/end events with prompts and responses\n * - Tool execution with inputs and outputs\n * - Chain execution flow\n * - Error events and debugging information\n * \n * The handler maintains a map of run data to correlate start/end events\n * and provides real-time tracing capabilities for LangChain applications.\n */\nexport class TracingCallbackHandler extends BaseCallbackHandler {\n  name = \"agent_trace_handler\";\n\n  private client: TraceClient;\n  private traceId: string;\n  private runDataMap: Map<string, RunData> = new Map();\n  private config: TraceConfig;\n\n  /**\n   * Creates a new TracingCallbackHandler instance\n   * \n   * @param config - Optional configuration object\n   * @param config.endpoint - Backend server endpoint (default: \"http://localhost:8000\")\n   * @param config.projectName - Project name for organizing traces (default: \"default\")\n   * @param config.debug - Enable debug logging (default: false)\n   * @param config.metadata - Additional metadata to include with all events\n   */\n  constructor(config?: Partial<TraceConfig>) {\n    super();\n\n    // First: Initialize config with defaults\n    this.config = {\n      endpoint: config?.endpoint || \"http://localhost:8000\",\n      projectName: config?.projectName || \"default\",\n      debug: config?.debug || false,\n      ...config\n    };\n\n    // Then: Add projectName to metadata\n    this.config.metadata = {\n      projectName: this.config.projectName,\n      ...this.config.metadata\n    };\n\n    this.client = new TraceClient(this.config);\n    this.traceId = uuidv4();\n\n    if (this.config.debug) {\n      console.log(`[AgentTrace] Started trace: ${this.traceId}`);\n    }\n  }\n\n  /**\n   * Called when an LLM starts running\n   * \n   * This method is automatically invoked by LangChain when an LLM begins processing.\n   * It captures the LLM configuration, prompts, and metadata, then sends a start\n   * event to the backend for visualization.\n   * \n   * @param llm - Serialized LLM configuration object\n   * @param prompts - Array of input prompts being sent to the LLM\n   * @param runId - Unique identifier for this LLM run\n   * @param parentRunId - Optional parent run ID for nested operations\n   * @param extraParams - Additional parameters passed to the LLM\n   * @param tags - Optional tags for categorizing the run\n   * @param metadata - Optional metadata to include with the event\n   */\n  async handleLLMStart(\n    llm: Serialized,\n    prompts: string[],\n    runId: string,\n    parentRunId?: string,\n    extraParams?: Record<string, any>,\n    tags?: string[],\n    metadata?: Record<string, any>\n  ): Promise<void> {\n    const serialized = EventSerializer.serializeSerialized(llm);\n    const model = EventSerializer.extractModelName(llm);\n    console.log(\n      llm,\n      prompts,\n      runId,\n      parentRunId,\n      extraParams,\n      \"handleLLMStart parameters\"\n    );\n    // Store run data\n    this.runDataMap.set(runId, {\n      runId,\n      parentRunId,\n      nodeType: \"llm\",\n      startTime: Date.now(),\n      status: \"running\",\n      data: {\n        model,\n        prompts,\n        serialized\n      }\n    });\n\n    // Send event\n    const event: LLMStartEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId,\n      timestamp: Date.now(),\n      type: \"llm_start\",\n      model,\n      prompts,\n      invocationParams: extraParams,\n      metadata: {\n        ...this.config.metadata,\n        ...metadata,\n        tags\n      }\n    };\n    console.log(event, \"event\\n\\n\\n\\n\\n\\n\\n\");\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when an LLM finishes running\n   * \n   * This method is automatically invoked by LangChain when an LLM completes processing.\n   * It captures the output, calculates execution time, and sends an end event to the\n   * backend. It correlates with the corresponding start event using the runId.\n   * \n   * @param output - LLMResult containing the generated responses and token usage\n   * @param runId - Unique identifier matching the corresponding start event\n   */\n  async handleLLMEnd(output: LLMResult, runId: string): Promise<void> {\n    console.log(runId, \"runID\");\n    const runData = this.runDataMap.get(runId);\n    if (!runData) {\n      console.error(`[AgentTrace] No run data found for ${runId}`);\n      return;\n    }\n\n    const endTime = Date.now();\n    const latency = endTime - runData.startTime;\n\n    // Serialize output\n    const { response, tokens } = EventSerializer.serializeLLMResult(output);\n    const cost = EventSerializer.calculateCost(runData.data.model, tokens);\n\n    // Update run data\n    runData.endTime = endTime;\n    runData.status = \"complete\";\n\n    // Send event with reasoning data\n    const event: LLMEndEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId: runData.parentRunId,\n      timestamp: endTime,\n      type: \"llm_end\",\n      response,\n      tokens,\n      cost,\n      latency,\n      // Include reasoning collected from handleText\n      reasoning: runData.data.reasoning?.join('\\n'),\n      agentActions: runData.data.agentActions\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when a tool starts running\n   * \n   * This method is automatically invoked by LangChain when a tool begins execution.\n   * It captures the tool configuration, input parameters, and metadata, then sends\n   * a tool start event to the backend for visualization.\n   * \n   * @param tool - Serialized tool configuration or tool name string\n   * @param input - Input parameters passed to the tool\n   * @param runId - Unique identifier for this tool run\n   * @param parentRunId - Optional parent run ID for nested operations\n   * @param tags - Optional tags for categorizing the run\n   * @param metadata - Optional metadata to include with the event\n   */\n  async handleToolStart(\n    tool: Serialized,\n    input: string,\n    runId: string,\n    parentRunId?: string,\n    tags?: string[],\n    metadata?: Record<string, any>\n  ): Promise<void> {\n    // Handle both string tool names and serialized tool objects\n    let toolName: string;\n    if (typeof tool === 'string') {\n      toolName = tool;\n    } else {\n      const serialized = EventSerializer.serializeSerialized(tool);\n      toolName = serialized.name;\n    }\n    console.log(\"handleToolStart is running\");\n    // Store run data\n    this.runDataMap.set(runId, {\n      runId,\n      parentRunId,\n      nodeType: \"tool\",\n      startTime: Date.now(),\n      status: \"running\",\n      data: {\n        toolName,\n        input\n      }\n    });\n\n    // Send event\n    const event: ToolStartEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId,\n      timestamp: Date.now(),\n      type: \"tool_start\",\n      toolName,\n      input: EventSerializer.serializeToolInput(input),\n      metadata: {\n        ...this.config.metadata,\n        ...metadata,\n        tags\n      }\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when a tool finishes running\n   * \n   * This method is automatically invoked by LangChain when a tool completes execution.\n   * It captures the output, calculates execution time, and sends a tool end event to\n   * the backend. It correlates with the corresponding start event using the runId.\n   * \n   * @param output - The output result from the tool execution\n   * @param runId - Unique identifier matching the corresponding start event\n   */\n  async handleToolEnd(output: string, runId: string): Promise<void> {\n    const runData = this.runDataMap.get(runId);\n    if (!runData) {\n      console.error(`[AgentTrace] No run data found for ${runId}`);\n      return;\n    }\n\n    const endTime = Date.now();\n    const latency = endTime - runData.startTime;\n\n    // Calculate tool cost (tools typically have minimal execution costs)\n    const toolCost = EventSerializer.calculateToolCost(runData.data.toolName, latency);\n\n    // Update run data\n    runData.endTime = endTime;\n    runData.status = \"complete\";\n\n    // Send event with reasoning\n    const event: ToolEndEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId: runData.parentRunId,\n      timestamp: endTime,\n      type: \"tool_end\",\n      toolName: runData.data.toolName,\n      output,\n      cost: toolCost,\n      latency,\n      // Include reasoning collected from handleText\n      reasoning: runData.data.reasoning?.join('\\n'),\n      agentActions: runData.data.agentActions\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when chain starts running\n   */\n  async handleChainStart(\n    chain: Serialized,\n    inputs: Record<string, any>,\n    runId: string,\n    parentRunId?: string,\n    tags?: string[],\n    metadata?: Record<string, any>\n  ): Promise<void> {\n    const serialized = EventSerializer.serializeSerialized(chain);\n    const chainName = serialized.name;\n    console.log(\" handleChainStart is running\");\n    // Store run data\n    this.runDataMap.set(runId, {\n      runId,\n      parentRunId,\n      nodeType: \"chain\",\n      startTime: Date.now(),\n      status: \"running\",\n      data: {\n        chainName,\n        inputs\n      }\n    });\n\n    // Send event\n    const event: ChainStartEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId,\n      timestamp: Date.now(),\n      type: \"chain_start\",\n      chainName,\n      inputs,\n      metadata: {\n        ...this.config.metadata,\n        ...metadata,\n        tags\n      }\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when chain ends running\n   */\n  async handleChainEnd(\n    outputs: Record<string, any>,\n    runId: string\n  ): Promise<void> {\n    const runData = this.runDataMap.get(runId);\n    if (!runData) {\n      console.error(`[AgentTrace] No run data found for ${runId}`);\n      return;\n    }\n\n    const endTime = Date.now();\n    const latency = endTime - runData.startTime;\n\n    // Update run data\n    runData.endTime = endTime;\n    runData.status = \"complete\";\n\n    // Send event with reasoning\n    const event: ChainEndEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId: runData.parentRunId,\n      timestamp: endTime,\n      type: \"chain_end\",\n      chainName: runData.data.chainName,\n      outputs,\n      latency,\n      // Include reasoning collected from handleText\n      reasoning: runData.data.reasoning?.join('\\n'),\n      agentActions: runData.data.agentActions\n    };\n\n    this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when an error occurs\n   */\n  async handleLLMError(error: Error, runId: string): Promise<void> {\n    await this.handleError(error, runId);\n  }\n\n  async handleToolError(error: Error, runId: string): Promise<void> {\n    await this.handleError(error, runId);\n  }\n\n  async handleChainError(error: Error, runId: string): Promise<void> {\n    await this.handleError(error, runId);\n  }\n\n  private async handleError(error: Error, runId: string): Promise<void> {\n    const runData = this.runDataMap.get(runId);\n\n    if (runData) {\n      runData.status = \"error\";\n    }\n\n    const { message, stack } = EventSerializer.serializeError(error);\n\n    const event: ErrorEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId: runData?.parentRunId,\n      timestamp: Date.now(),\n      type: \"error\",\n      error: message,\n      stack\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when text is emitted during execution\n   * \n   * This captures LLM thinking, agent reasoning, and intermediate text outputs\n   */\n  async handleText(text: string, runId: string): Promise<void> {\n    const runData = this.runDataMap.get(runId);\n    \n    // Store reasoning text with the run data\n    if (runData) {\n      if (!runData.data.reasoning) {\n        runData.data.reasoning = [];\n      }\n      runData.data.reasoning.push(text);\n    }\n\n    // Send text event for real-time display\n    const event: TextEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId: runData?.parentRunId,\n      timestamp: Date.now(),\n      type: \"text\" as const,\n      text,\n      metadata: this.config.metadata\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when an agent takes an action\n   * \n   * This captures the agent's decision-making process, including:\n   * - What tool the agent chose to use\n   * - Why the agent made that choice\n   * - The reasoning behind the decision\n   */\n  async handleAgentAction(\n    action: any,\n    runId: string\n  ): Promise<void> {\n    const runData = this.runDataMap.get(runId);\n    \n    // Extract reasoning from the action\n    const reasoning = {\n      tool: action.tool,\n      toolInput: action.toolInput,\n      log: action.log, // This contains the agent's thinking!\n      messageLog: action.messageLog\n    };\n\n    // Store with run data\n    if (runData) {\n      if (!runData.data.agentActions) {\n        runData.data.agentActions = [];\n      }\n      runData.data.agentActions.push(reasoning);\n    }\n\n    // Send agent action event\n    const event: AgentActionEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId: runData?.parentRunId,\n      timestamp: Date.now(),\n      type: \"agent_action\" as const,\n      action: reasoning,\n      metadata: this.config.metadata\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when an agent completes execution\n   */\n  async handleAgentEnd(\n    output: any,\n    runId: string\n  ): Promise<void> {\n    const runData = this.runDataMap.get(runId);\n    \n    // Send agent end event with all collected reasoning\n    const event: AgentEndEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId: runData?.parentRunId,\n      timestamp: Date.now(),\n      type: \"agent_end\" as const,\n      output,\n      reasoning: runData?.data.reasoning,\n      agentActions: runData?.data.agentActions,\n      metadata: this.config.metadata\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when a retriever starts (for RAG systems)\n   */\n  async handleRetrieverStart(\n    retriever: Serialized,\n    query: string,\n    runId: string,\n    parentRunId?: string,\n    tags?: string[],\n    metadata?: Record<string, any>\n  ): Promise<void> {\n    const event: RetrieverStartEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId,\n      timestamp: Date.now(),\n      type: \"retriever_start\" as const,\n      query,\n      metadata: {\n        ...this.config.metadata,\n        ...metadata,\n        tags\n      }\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when a retriever completes\n   */\n  async handleRetrieverEnd(\n    documents: any[],\n    runId: string\n  ): Promise<void> {\n    const event: RetrieverEndEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      timestamp: Date.now(),\n      type: \"retriever_end\" as const,\n      documents: documents.map(doc => ({\n        pageContent: doc.pageContent,\n        metadata: doc.metadata\n      })),\n      metadata: this.config.metadata\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Get trace ID\n   */\n  public getTraceId(): string {\n    return this.traceId;\n  }\n\n  /**\n   * Check if connected to backend\n   */\n  public isConnected(): boolean {\n    return this.client.isConnected();\n  }\n\n  /**\n   * Cleanup and disconnect\n   */\n  public async cleanup(): Promise<void> {\n    this.client.disconnect();\n    this.runDataMap.clear();\n  }\n}\n","/**\n * Auto-detection utilities for Axon\n * Automatically detects project configuration and sets up tracing\n */\n\n// Node.js specific imports - will be handled by bundler\nimport { TracingCallbackHandler } from './callback';\nimport { TraceConfig } from './types';\n\n/**\n * Auto-detect project configuration from .axon-ai/config.json\n */\nexport async function detectProjectConfig(): Promise<Partial<TraceConfig> | null> {\n  if (typeof (globalThis as any).window !== 'undefined') {\n    // Browser environment - return default config\n    return {\n      projectName: 'browser',\n      endpoint: 'http://localhost:3000',\n      debug: false\n    };\n  }\n\n  try {\n    const fs = await import('fs');\n    const path = await import('path');\n    \n    let currentDir = process.cwd();\n    const maxDepth = 10;\n    let depth = 0;\n\n    while (depth < maxDepth) {\n      const configPath = path.join(currentDir, '.axon-ai', 'config.json');\n      \n      if (fs.existsSync(configPath)) {\n        try {\n          const config = JSON.parse(fs.readFileSync(configPath, 'utf8'));\n          return {\n            projectName: config.project,\n            endpoint: `http://${config.backend.host}:${config.backend.port}`,\n            debug: false\n          };\n        } catch (error) {\n          console.warn('[Axon] Failed to parse config file:', error);\n          return null;\n        }\n      }\n\n      const parentDir = path.resolve(currentDir, '..');\n      if (parentDir === currentDir) {\n        break;\n      }\n\n      currentDir = parentDir;\n      depth++;\n    }\n\n    return null;\n  } catch (error) {\n    console.warn('[Axon] Failed to load fs/path modules:', error);\n    return null;\n  }\n}\n\n/**\n * Auto-detect project name from package.json\n */\nexport async function detectProjectName(): Promise<string> {\n  if (typeof (globalThis as any).window !== 'undefined') {\n    return 'browser';\n  }\n\n  try {\n    const fs = await import('fs');\n    const path = await import('path');\n    \n    let currentDir = process.cwd();\n    const maxDepth = 10;\n    let depth = 0;\n\n    while (depth < maxDepth) {\n      const packageJsonPath = path.join(currentDir, 'package.json');\n      \n      if (fs.existsSync(packageJsonPath)) {\n        try {\n          const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf8'));\n          return packageJson.name || 'default';\n        } catch (error) {\n          console.warn('[Axon] Failed to parse package.json:', error);\n          return 'default';\n        }\n      }\n\n      const parentDir = path.resolve(currentDir, '..');\n      if (parentDir === currentDir) {\n        break;\n      }\n\n      currentDir = parentDir;\n      depth++;\n    }\n\n    return 'default';\n  } catch (error) {\n    console.warn('[Axon] Failed to load fs/path modules:', error);\n    return 'default';\n  }\n}\n\n/**\n * Create a tracer with auto-detected configuration\n */\nexport async function createAutoTracer(overrides?: Partial<TraceConfig>): Promise<TracingCallbackHandler> {\n  // First try to detect from .axon-ai/config.json\n  let config = await detectProjectConfig();\n  \n  // If not found, use package.json name and default endpoint\n  if (!config) {\n    config = {\n      projectName: await detectProjectName(),\n      endpoint: 'http://localhost:3000',\n      debug: false\n    };\n  }\n\n  // Apply any overrides\n  const finalConfig = {\n    ...config,\n    ...overrides\n  };\n\n  return new TracingCallbackHandler(finalConfig);\n}\n\n/**\n * Check if Axon is properly configured in the current project\n */\nexport async function isAgentTraceConfigured(): Promise<boolean> {\n  const config = await detectProjectConfig();\n  return config !== null;\n}\n\n/**\n * Get configuration status for debugging\n */\nexport async function getConfigurationStatus(): Promise<{\n  configured: boolean;\n  projectName: string;\n  endpoint: string;\n  source: 'config-file' | 'package-json' | 'default';\n}> {\n  const config = await detectProjectConfig();\n  \n  if (config) {\n    return {\n      configured: true,\n      projectName: config.projectName || 'default',\n      endpoint: config.endpoint || 'http://localhost:3000',\n      source: 'config-file'\n    };\n  }\n\n  const projectName = await detectProjectName();\n  return {\n    configured: false,\n    projectName,\n    endpoint: 'http://localhost:3000',\n    source: projectName === 'default' ? 'default' : 'package-json'\n  };\n}\n","/**\n * Public API exports\n */\nimport { TracingCallbackHandler } from \"./callback\";\nimport type { TraceConfig } from \"./types\";\n\n// Export classes (so users can import them)\nexport { TracingCallbackHandler } from \"./callback\";\nexport { TraceClient } from \"./client\";\nexport { EventSerializer } from \"./serializer\";\n\n// Export auto-detection utilities\nexport { \n  createAutoTracer,\n  detectProjectConfig,\n  detectProjectName,\n  isAgentTraceConfigured,\n  getConfigurationStatus\n} from \"./auto-detection\";\n\nexport type {\n  TraceConfig,\n  TraceEvent,\n  LLMStartEvent,\n  LLMEndEvent,\n  ToolStartEvent,\n  ToolEndEvent,\n  ChainStartEvent,\n  ChainEndEvent,\n  ErrorEvent,\n  NodeType,\n  NodeStatus,\n  RunData\n} from \"./types\";\n\n/**\n * Convenience function to create a tracer\n */\nexport function createTracer(config?: Partial<TraceConfig>) {\n  return new TracingCallbackHandler(config);\n}\n"],"names":["__defProp","camelcaseModule","Serializable","uuidv4"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}