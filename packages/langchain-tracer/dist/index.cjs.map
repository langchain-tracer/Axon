{"version":3,"file":"index.cjs","sources":["../../../node_modules/decamelize/index.js","../../../node_modules/camelcase/index.js","../../../node_modules/@langchain/core/dist/load/map_keys.js","../../../node_modules/@langchain/core/dist/load/serializable.js","../../../node_modules/@langchain/core/dist/utils/env.js","../../../node_modules/@langchain/core/dist/callbacks/base.js","../src/client.ts","../src/serializer.ts","../src/callback.ts","../src/auto-detection.ts","../src/index.ts"],"sourcesContent":["'use strict';\nmodule.exports = function (str, sep) {\n\tif (typeof str !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\tsep = typeof sep === 'undefined' ? '_' : sep;\n\n\treturn str\n\t\t.replace(/([a-z\\d])([A-Z])/g, '$1' + sep + '$2')\n\t\t.replace(/([A-Z]+)([A-Z][a-z\\d]+)/g, '$1' + sep + '$2')\n\t\t.toLowerCase();\n};\n","'use strict';\n\nconst UPPERCASE = /[\\p{Lu}]/u;\nconst LOWERCASE = /[\\p{Ll}]/u;\nconst LEADING_CAPITAL = /^[\\p{Lu}](?![\\p{Lu}])/gu;\nconst IDENTIFIER = /([\\p{Alpha}\\p{N}_]|$)/u;\nconst SEPARATORS = /[_.\\- ]+/;\n\nconst LEADING_SEPARATORS = new RegExp('^' + SEPARATORS.source);\nconst SEPARATORS_AND_IDENTIFIER = new RegExp(SEPARATORS.source + IDENTIFIER.source, 'gu');\nconst NUMBERS_AND_IDENTIFIER = new RegExp('\\\\d+' + IDENTIFIER.source, 'gu');\n\nconst preserveCamelCase = (string, toLowerCase, toUpperCase) => {\n\tlet isLastCharLower = false;\n\tlet isLastCharUpper = false;\n\tlet isLastLastCharUpper = false;\n\n\tfor (let i = 0; i < string.length; i++) {\n\t\tconst character = string[i];\n\n\t\tif (isLastCharLower && UPPERCASE.test(character)) {\n\t\t\tstring = string.slice(0, i) + '-' + string.slice(i);\n\t\t\tisLastCharLower = false;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = true;\n\t\t\ti++;\n\t\t} else if (isLastCharUpper && isLastLastCharUpper && LOWERCASE.test(character)) {\n\t\t\tstring = string.slice(0, i - 1) + '-' + string.slice(i - 1);\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = false;\n\t\t\tisLastCharLower = true;\n\t\t} else {\n\t\t\tisLastCharLower = toLowerCase(character) === character && toUpperCase(character) !== character;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = toUpperCase(character) === character && toLowerCase(character) !== character;\n\t\t}\n\t}\n\n\treturn string;\n};\n\nconst preserveConsecutiveUppercase = (input, toLowerCase) => {\n\tLEADING_CAPITAL.lastIndex = 0;\n\n\treturn input.replace(LEADING_CAPITAL, m1 => toLowerCase(m1));\n};\n\nconst postProcess = (input, toUpperCase) => {\n\tSEPARATORS_AND_IDENTIFIER.lastIndex = 0;\n\tNUMBERS_AND_IDENTIFIER.lastIndex = 0;\n\n\treturn input.replace(SEPARATORS_AND_IDENTIFIER, (_, identifier) => toUpperCase(identifier))\n\t\t.replace(NUMBERS_AND_IDENTIFIER, m => toUpperCase(m));\n};\n\nconst camelCase = (input, options) => {\n\tif (!(typeof input === 'string' || Array.isArray(input))) {\n\t\tthrow new TypeError('Expected the input to be `string | string[]`');\n\t}\n\n\toptions = {\n\t\tpascalCase: false,\n\t\tpreserveConsecutiveUppercase: false,\n\t\t...options\n\t};\n\n\tif (Array.isArray(input)) {\n\t\tinput = input.map(x => x.trim())\n\t\t\t.filter(x => x.length)\n\t\t\t.join('-');\n\t} else {\n\t\tinput = input.trim();\n\t}\n\n\tif (input.length === 0) {\n\t\treturn '';\n\t}\n\n\tconst toLowerCase = options.locale === false ?\n\t\tstring => string.toLowerCase() :\n\t\tstring => string.toLocaleLowerCase(options.locale);\n\tconst toUpperCase = options.locale === false ?\n\t\tstring => string.toUpperCase() :\n\t\tstring => string.toLocaleUpperCase(options.locale);\n\n\tif (input.length === 1) {\n\t\treturn options.pascalCase ? toUpperCase(input) : toLowerCase(input);\n\t}\n\n\tconst hasUpperCase = input !== toLowerCase(input);\n\n\tif (hasUpperCase) {\n\t\tinput = preserveCamelCase(input, toLowerCase, toUpperCase);\n\t}\n\n\tinput = input.replace(LEADING_SEPARATORS, '');\n\n\tif (options.preserveConsecutiveUppercase) {\n\t\tinput = preserveConsecutiveUppercase(input, toLowerCase);\n\t} else {\n\t\tinput = toLowerCase(input);\n\t}\n\n\tif (options.pascalCase) {\n\t\tinput = toUpperCase(input.charAt(0)) + input.slice(1);\n\t}\n\n\treturn postProcess(input, toUpperCase);\n};\n\nmodule.exports = camelCase;\n// TODO: Remove this for the next major release\nmodule.exports.default = camelCase;\n","import snakeCase from \"decamelize\";\nimport camelCase from \"camelcase\";\nexport function keyToJson(key, map) {\n    return map?.[key] || snakeCase(key);\n}\nexport function keyFromJson(key, map) {\n    return map?.[key] || camelCase(key);\n}\nexport function mapKeys(fields, mapper, map) {\n    const mapped = {};\n    for (const key in fields) {\n        if (Object.hasOwn(fields, key)) {\n            mapped[mapper(key, map)] = fields[key];\n        }\n    }\n    return mapped;\n}\n","import { keyToJson, mapKeys } from \"./map_keys.js\";\nfunction shallowCopy(obj) {\n    return Array.isArray(obj) ? [...obj] : { ...obj };\n}\nfunction replaceSecrets(root, secretsMap) {\n    const result = shallowCopy(root);\n    for (const [path, secretId] of Object.entries(secretsMap)) {\n        const [last, ...partsReverse] = path.split(\".\").reverse();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let current = result;\n        for (const part of partsReverse.reverse()) {\n            if (current[part] === undefined) {\n                break;\n            }\n            current[part] = shallowCopy(current[part]);\n            current = current[part];\n        }\n        if (current[last] !== undefined) {\n            current[last] = {\n                lc: 1,\n                type: \"secret\",\n                id: [secretId],\n            };\n        }\n    }\n    return result;\n}\n/**\n * Get a unique name for the module, rather than parent class implementations.\n * Should not be subclassed, subclass lc_name above instead.\n */\nexport function get_lc_unique_name(\n// eslint-disable-next-line @typescript-eslint/no-use-before-define\nserializableClass) {\n    // \"super\" here would refer to the parent class of Serializable,\n    // when we want the parent class of the module actually calling this method.\n    const parentClass = Object.getPrototypeOf(serializableClass);\n    const lcNameIsSubclassed = typeof serializableClass.lc_name === \"function\" &&\n        (typeof parentClass.lc_name !== \"function\" ||\n            serializableClass.lc_name() !== parentClass.lc_name());\n    if (lcNameIsSubclassed) {\n        return serializableClass.lc_name();\n    }\n    else {\n        return serializableClass.name;\n    }\n}\nexport class Serializable {\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */\n    static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */\n    get lc_id() {\n        return [\n            ...this.lc_namespace,\n            get_lc_unique_name(this.constructor),\n        ];\n    }\n    /**\n     * A map of secrets, which will be omitted from serialization.\n     * Keys are paths to the secret in constructor args, e.g. \"foo.bar.baz\".\n     * Values are the secret ids, which will be used when deserializing.\n     */\n    get lc_secrets() {\n        return undefined;\n    }\n    /**\n     * A map of additional attributes to merge with constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the attribute values, which will be serialized.\n     * These attributes need to be accepted by the constructor as arguments.\n     */\n    get lc_attributes() {\n        return undefined;\n    }\n    /**\n     * A map of aliases for constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the alias that will replace the key in serialization.\n     * This is used to eg. make argument names match Python.\n     */\n    get lc_aliases() {\n        return undefined;\n    }\n    constructor(kwargs, ..._args) {\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.lc_kwargs = kwargs || {};\n    }\n    toJSON() {\n        if (!this.lc_serializable) {\n            return this.toJSONNotImplemented();\n        }\n        if (\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        this.lc_kwargs instanceof Serializable ||\n            typeof this.lc_kwargs !== \"object\" ||\n            Array.isArray(this.lc_kwargs)) {\n            // We do not support serialization of classes with arg not a POJO\n            // I'm aware the check above isn't as strict as it could be\n            return this.toJSONNotImplemented();\n        }\n        const aliases = {};\n        const secrets = {};\n        const kwargs = Object.keys(this.lc_kwargs).reduce((acc, key) => {\n            acc[key] = key in this ? this[key] : this.lc_kwargs[key];\n            return acc;\n        }, {});\n        // get secrets, attributes and aliases from all superclasses\n        for (\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        let current = Object.getPrototypeOf(this); current; current = Object.getPrototypeOf(current)) {\n            Object.assign(aliases, Reflect.get(current, \"lc_aliases\", this));\n            Object.assign(secrets, Reflect.get(current, \"lc_secrets\", this));\n            Object.assign(kwargs, Reflect.get(current, \"lc_attributes\", this));\n        }\n        // include all secrets used, even if not in kwargs,\n        // will be replaced with sentinel value in replaceSecrets\n        Object.keys(secrets).forEach((keyPath) => {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias, @typescript-eslint/no-explicit-any\n            let read = this;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let write = kwargs;\n            const [last, ...partsReverse] = keyPath.split(\".\").reverse();\n            for (const key of partsReverse.reverse()) {\n                if (!(key in read) || read[key] === undefined)\n                    return;\n                if (!(key in write) || write[key] === undefined) {\n                    if (typeof read[key] === \"object\" && read[key] != null) {\n                        write[key] = {};\n                    }\n                    else if (Array.isArray(read[key])) {\n                        write[key] = [];\n                    }\n                }\n                read = read[key];\n                write = write[key];\n            }\n            if (last in read && read[last] !== undefined) {\n                write[last] = write[last] || read[last];\n            }\n        });\n        return {\n            lc: 1,\n            type: \"constructor\",\n            id: this.lc_id,\n            kwargs: mapKeys(Object.keys(secrets).length ? replaceSecrets(kwargs, secrets) : kwargs, keyToJson, aliases),\n        };\n    }\n    toJSONNotImplemented() {\n        return {\n            lc: 1,\n            type: \"not_implemented\",\n            id: this.lc_id,\n        };\n    }\n}\n","export const isBrowser = () => typeof window !== \"undefined\" && typeof window.document !== \"undefined\";\nexport const isWebWorker = () => typeof globalThis === \"object\" &&\n    globalThis.constructor &&\n    globalThis.constructor.name === \"DedicatedWorkerGlobalScope\";\nexport const isJsDom = () => (typeof window !== \"undefined\" && window.name === \"nodejs\") ||\n    (typeof navigator !== \"undefined\" &&\n        (navigator.userAgent.includes(\"Node.js\") ||\n            navigator.userAgent.includes(\"jsdom\")));\n// Supabase Edge Function provides a `Deno` global object\n// without `version` property\nexport const isDeno = () => typeof Deno !== \"undefined\";\n// Mark not-as-node if in Supabase Edge Function\nexport const isNode = () => typeof process !== \"undefined\" &&\n    typeof process.versions !== \"undefined\" &&\n    typeof process.versions.node !== \"undefined\" &&\n    !isDeno();\nexport const getEnv = () => {\n    let env;\n    if (isBrowser()) {\n        env = \"browser\";\n    }\n    else if (isNode()) {\n        env = \"node\";\n    }\n    else if (isWebWorker()) {\n        env = \"webworker\";\n    }\n    else if (isJsDom()) {\n        env = \"jsdom\";\n    }\n    else if (isDeno()) {\n        env = \"deno\";\n    }\n    else {\n        env = \"other\";\n    }\n    return env;\n};\nlet runtimeEnvironment;\nexport async function getRuntimeEnvironment() {\n    if (runtimeEnvironment === undefined) {\n        const env = getEnv();\n        runtimeEnvironment = {\n            library: \"langchain-js\",\n            runtime: env,\n        };\n    }\n    return runtimeEnvironment;\n}\nexport function getEnvironmentVariable(name) {\n    // Certain Deno setups will throw an error if you try to access environment variables\n    // https://github.com/langchain-ai/langchainjs/issues/1412\n    try {\n        return typeof process !== \"undefined\"\n            ? // eslint-disable-next-line no-process-env\n                process.env?.[name]\n            : undefined;\n    }\n    catch (e) {\n        return undefined;\n    }\n}\n","import * as uuid from \"uuid\";\nimport { Serializable, get_lc_unique_name, } from \"../load/serializable.js\";\nimport { getEnvironmentVariable } from \"../utils/env.js\";\n/**\n * Abstract class that provides a set of optional methods that can be\n * overridden in derived classes to handle various events during the\n * execution of a LangChain application.\n */\nclass BaseCallbackHandlerMethodsClass {\n}\n/**\n * Abstract base class for creating callback handlers in the LangChain\n * framework. It provides a set of optional methods that can be overridden\n * in derived classes to handle various events during the execution of a\n * LangChain application.\n */\nexport class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass {\n    get lc_namespace() {\n        return [\"langchain_core\", \"callbacks\", this.name];\n    }\n    get lc_secrets() {\n        return undefined;\n    }\n    get lc_attributes() {\n        return undefined;\n    }\n    get lc_aliases() {\n        return undefined;\n    }\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */\n    static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */\n    get lc_id() {\n        return [\n            ...this.lc_namespace,\n            get_lc_unique_name(this.constructor),\n        ];\n    }\n    constructor(input) {\n        super();\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"ignoreLLM\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreAgent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreRetriever\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreCustomEvent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"raiseError\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"awaitHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: getEnvironmentVariable(\"LANGCHAIN_CALLBACKS_BACKGROUND\") !== \"true\"\n        });\n        this.lc_kwargs = input || {};\n        if (input) {\n            this.ignoreLLM = input.ignoreLLM ?? this.ignoreLLM;\n            this.ignoreChain = input.ignoreChain ?? this.ignoreChain;\n            this.ignoreAgent = input.ignoreAgent ?? this.ignoreAgent;\n            this.ignoreRetriever = input.ignoreRetriever ?? this.ignoreRetriever;\n            this.ignoreCustomEvent =\n                input.ignoreCustomEvent ?? this.ignoreCustomEvent;\n            this.raiseError = input.raiseError ?? this.raiseError;\n            this.awaitHandlers =\n                this.raiseError || (input._awaitHandler ?? this.awaitHandlers);\n        }\n    }\n    copy() {\n        return new this.constructor(this);\n    }\n    toJSON() {\n        return Serializable.prototype.toJSON.call(this);\n    }\n    toJSONNotImplemented() {\n        return Serializable.prototype.toJSONNotImplemented.call(this);\n    }\n    static fromMethods(methods) {\n        class Handler extends BaseCallbackHandler {\n            constructor() {\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: uuid.v4()\n                });\n                Object.assign(this, methods);\n            }\n        }\n        return new Handler();\n    }\n}\n","/**\n * WebSocket client for sending trace events to backend\n */\n\nimport { io, Socket } from \"socket.io-client\";\nimport { TraceConfig, TraceEvent } from \"./types\";\n\nexport class TraceClient {\n  private socket: Socket | null = null;\n  private config: TraceConfig;\n  private connected: boolean = false;\n  private eventQueue: TraceEvent[] = [];\n  private reconnectAttempts: number = 0;\n  private maxReconnectAttempts: number = 5;\n  private batchTimer: NodeJS.Timeout | null = null;\n\n  constructor(config: Partial<TraceConfig>) {\n    this.config = {\n      batchInterval: 100,\n      batchSize: 50,\n      debug: false,\n      projectName: \"default\",\n      endpoint: \"http://localhost:8000\",\n      ...config\n    } as TraceConfig;\n\n    this.connect();\n  }\n\n  /**\n   * Connect to WebSocket server\n   */\n  private connect(): void {\n    try {\n      console.log(\n        `[AgentTrace] Attempting connection to ${this.config.endpoint}...`\n      );\n\n      this.socket = io(this.config.endpoint, {\n        auth: {\n          apiKey: this.config.apiKey,\n          projectName: this.config.projectName\n        },\n        transports: [\"websocket\", \"polling\"], // üëà Add polling fallback\n        reconnection: true,\n        reconnectionAttempts: this.maxReconnectAttempts,\n        reconnectionDelay: 1000,\n        timeout: 5000 // üëà Add timeout\n      });\n\n      this.socket.on(\"connect\", () => {\n        this.connected = true;\n        this.reconnectAttempts = 0;\n        console.log(`[AgentTrace] ‚úÖ Connected! Socket ID: ${this.socket?.id}`);\n\n        // Flush queued events\n        this.flushQueue();\n      });\n\n      this.socket.on(\"disconnect\", (reason) => {\n        this.connected = false;\n        console.log(`[AgentTrace] ‚ö†Ô∏è  Disconnected: ${reason}`);\n      });\n\n      this.socket.on(\"connect_error\", (error) => {\n        this.reconnectAttempts++;\n        console.error(\n          `[AgentTrace] ‚ùå Connection error (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts}):`,\n          error.message\n        );\n        console.error(\n          `[AgentTrace] Trying to connect to: ${this.config.endpoint}`\n        );\n\n        if (this.reconnectAttempts >= this.maxReconnectAttempts) {\n          console.error(\n            \"[AgentTrace] ‚ö†Ô∏è  Max reconnection attempts reached. Events will be queued.\"\n          );\n        }\n      });\n\n      this.socket.on(\"error\", (error) => {\n        console.error(`[AgentTrace] ‚ùå Socket error:`, error);\n      });\n\n      // üëá Add these listeners\n      this.socket.io.on(\"error\", (error) => {\n        console.error(`[AgentTrace] ‚ùå IO error:`, error);\n      });\n\n      this.socket.io.on(\"reconnect_attempt\", (attempt) => {\n        console.log(`[AgentTrace] üîÑ Reconnect attempt ${attempt}...`);\n      });\n\n      this.socket.io.on(\"reconnect_failed\", () => {\n        console.error(\n          `[AgentTrace] ‚ùå Reconnection failed after ${this.maxReconnectAttempts} attempts`\n        );\n      });\n\n      // Start batch timer\n      this.startBatchTimer();\n    } catch (error) {\n      console.error(`[AgentTrace] ‚ùå Failed to create socket:`, error);\n    }\n  }\n\n  /**\n   * Send event to backend\n   */\n  public async sendEvent(event: TraceEvent): Promise<void> {\n    this.eventQueue.push(event);\n\n    // Send immediately if batch size reached\n    if (this.eventQueue.length >= this.config.batchSize!) {\n      this.flushQueue();\n    }\n\n    // Return immediately - actual sending happens asynchronously\n    return Promise.resolve();\n  }\n\n  /**\n   * Start batch timer to flush events periodically\n   */\n  private startBatchTimer(): void {\n    if (this.batchTimer) {\n      clearInterval(this.batchTimer);\n    }\n\n    this.batchTimer = setInterval(() => {\n      if (this.eventQueue.length > 0) {\n        this.flushQueue();\n      }\n    }, this.config.batchInterval);\n  }\n\n  /**\n   * Flush queued events to server\n   */\n  private flushQueue(): void {\n    console.log(\"flushQueue is running\");\n    if (this.eventQueue.length === 0) return;\n\n    const events = [...this.eventQueue];\n    this.eventQueue = [];\n\n    // In flushQueue() method, update to:\n    if (this.connected && this.socket) {\n      this.socket.emit(\"trace_events\", events, (response: any) => {\n        if (response?.error) {\n          this.log(`‚ùå Server error: ${response.error}`);\n          // Re-queue failed events\n          this.eventQueue.unshift(...events);\n        } else {\n          this.log(`‚úÖ ${events.length} events acknowledged`);\n        }\n      });\n      this.log(`üì§ Sent ${events.length} events`);\n    } else {\n      // Re-queue if not connected\n      this.eventQueue.unshift(...events);\n      this.log(`‚è≥ Queued ${events.length} events (not connected)`);\n    }\n  }\n\n  /**\n   * Disconnect and cleanup\n   */\n  public disconnect(): void {\n    // Flush remaining events\n    this.flushQueue();\n\n    if (this.batchTimer) {\n      clearInterval(this.batchTimer);\n      this.batchTimer = null;\n    }\n\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n    }\n\n    this.connected = false;\n  }\n\n  /**\n   * Check if connected\n   */\n  public isConnected(): boolean {\n    return this.connected;\n  }\n\n  /**\n   * Get queue size\n   */\n  public getQueueSize(): number {\n    return this.eventQueue.length;\n  }\n\n  /**\n   * Debug logging\n   */\n  private log(message: string): void {\n    if (this.config.debug) {\n      console.log(`[AgentTrace] ${message}`);\n    }\n  }\n}\n","/**\n * Serialize LangChain data for transmission\n */\n\nimport { LLMResult } from \"@langchain/core/outputs\";\nimport { Serialized } from \"@langchain/core/load/serializable\";\n\nexport class EventSerializer {\n  /**\n   * Serialize LLM result\n   */\n  static serializeLLMResult(result: LLMResult): {\n    response: string;\n    tokens: { prompt: number; completion: number; total: number };\n  } {\n    const generations = result.generations[0];\n    const response = generations?.[0]?.text || \"\";\n\n    const tokenUsage = result.llmOutput?.tokenUsage || {};\n    const tokens = {\n      prompt: tokenUsage.promptTokens || 0,\n      completion: tokenUsage.completionTokens || 0,\n      total: tokenUsage.totalTokens || 0\n    };\n\n    return { response, tokens };\n  }\n\n  /**\n   * Serialize serialized object (model info, etc)\n   */\n  static serializeSerialized(serialized: Serialized): {\n    type: string;\n    name: string;\n    params: Record<string, any>;\n  } {\n    console.log(serialized, \"serialized\");\n    return {\n      type: String(serialized.lc || \"unknown\"),\n      name: serialized.id?.[serialized.id.length - 1] || \"unknown\",\n      params: (\"kwargs\" in serialized ? serialized.kwargs : {}) || {}\n    };\n  }\n\n  /**\n   * Serialize tool input (can be string or object)\n   */\n  static serializeToolInput(\n    input: string | Record<string, any>\n  ): string | Record<string, any> {\n    if (typeof input === \"string\") {\n      return input;\n    }\n\n    try {\n      // Remove non-serializable properties\n      return JSON.parse(JSON.stringify(input));\n    } catch (error) {\n      return String(input);\n    }\n  }\n\n  /**\n   * Calculate cost based on tokens and model\n   */\n  static calculateCost(\n    model: string,\n    tokens: { prompt: number; completion: number; total: number }\n  ): number {\n    const pricing: Record<string, { input: number; output: number }> = {\n      \"gpt-4\": { input: 0.03, output: 0.06 },\n      \"gpt-4-turbo\": { input: 0.01, output: 0.03 },\n      \"gpt-3.5-turbo\": { input: 0.0015, output: 0.002 },\n      \"claude-3-opus\": { input: 0.015, output: 0.075 },\n      \"claude-3-sonnet\": { input: 0.003, output: 0.015 },\n      \"claude-3-haiku\": { input: 0.00025, output: 0.00125 }\n    };\n\n    const rates = pricing[model] || pricing[\"gpt-3.5-turbo\"];\n\n    // If we have actual token counts, use them\n    if (tokens.prompt > 0 || tokens.completion > 0) {\n      return (\n        (tokens.prompt / 1000) * rates.input +\n        (tokens.completion / 1000) * rates.output\n      );\n    }\n\n    // If no token data, return a minimal cost to indicate the operation happened\n    return 0.0001; // $0.0001 as a base cost for any LLM operation\n  }\n\n  /**\n   * Calculate cost for tool operations\n   */\n  static calculateToolCost(toolName: string, latency: number): number {\n    // Tools typically have minimal costs, but we can estimate based on complexity\n    const toolCosts: Record<string, number> = {\n      \"search\": 0.00005,      // Search operations\n      \"calculator\": 0.00001,  // Simple calculations\n      \"weather\": 0.00002,     // API calls\n      \"web_search\": 0.00005,  // Web search\n      \"file_read\": 0.00001,   // File operations\n      \"database\": 0.00003     // Database queries\n    };\n\n    const baseCost = toolCosts[toolName] || 0.00002; // Default cost for unknown tools\n    \n    // Add a small latency-based cost (longer operations cost slightly more)\n    const latencyCost = Math.min(latency / 1000000, 0.00001); // Max $0.00001 for latency\n    \n    return baseCost + latencyCost;\n  }\n\n  /**\n   * Extract model name from serialized data\n   */\n  static extractModelName(serialized: Serialized): string {\n    const params = (\"kwargs\" in serialized ? serialized.kwargs : {}) || {};\n    return params.model_name || params.model || \"unknown\";\n  }\n\n  /**\n   * Safely stringify error\n   */\n  static serializeError(error: Error): { message: string; stack?: string } {\n    return {\n      message: error.message,\n      stack: error.stack\n    };\n  }\n}\n","/**\n * LangChain callback handler for tracing agent execution\n */\n\nimport { BaseCallbackHandler } from \"@langchain/core/callbacks/base\";\nimport { LLMResult } from \"@langchain/core/outputs\";\nimport { Serialized } from \"@langchain/core/load/serializable\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { TraceClient } from \"./client\";\nimport { EventSerializer } from \"./serializer\";\nimport {\n  TraceConfig,\n  RunData,\n  LLMStartEvent,\n  LLMEndEvent,\n  ToolStartEvent,\n  ToolEndEvent,\n  ChainStartEvent,\n  ChainEndEvent,\n  ErrorEvent,\n  TextEvent,\n  AgentActionEvent,\n  AgentEndEvent,\n  RetrieverStartEvent,\n  RetrieverEndEvent\n} from \"./types\";\n\n/**\n * LangChain callback handler for tracing agent execution\n * \n * This class extends LangChain's BaseCallbackHandler to automatically capture\n * and send trace events to the Agent Trace Visualizer backend. It tracks:\n * - LLM start/end events with prompts and responses\n * - Tool execution with inputs and outputs\n * - Chain execution flow\n * - Error events and debugging information\n * \n * The handler maintains a map of run data to correlate start/end events\n * and provides real-time tracing capabilities for LangChain applications.\n */\nexport class TracingCallbackHandler extends BaseCallbackHandler {\n  name = \"agent_trace_handler\";\n\n  private client: TraceClient;\n  private traceId: string;\n  private runDataMap: Map<string, RunData> = new Map();\n  private config: TraceConfig;\n\n  /**\n   * Creates a new TracingCallbackHandler instance\n   * \n   * @param config - Optional configuration object\n   * @param config.endpoint - Backend server endpoint (default: \"http://localhost:8000\")\n   * @param config.projectName - Project name for organizing traces (default: \"default\")\n   * @param config.debug - Enable debug logging (default: false)\n   * @param config.metadata - Additional metadata to include with all events\n   */\n  constructor(config?: Partial<TraceConfig>) {\n    super();\n\n    // First: Initialize config with defaults\n    this.config = {\n      endpoint: config?.endpoint || \"http://localhost:8000\",\n      projectName: config?.projectName || \"default\",\n      debug: config?.debug || false,\n      ...config\n    };\n\n    // Then: Add projectName to metadata\n    this.config.metadata = {\n      projectName: this.config.projectName,\n      ...this.config.metadata\n    };\n\n    this.client = new TraceClient(this.config);\n    this.traceId = uuidv4();\n\n    if (this.config.debug) {\n      console.log(`[AgentTrace] Started trace: ${this.traceId}`);\n    }\n  }\n\n  /**\n   * Called when an LLM starts running\n   * \n   * This method is automatically invoked by LangChain when an LLM begins processing.\n   * It captures the LLM configuration, prompts, and metadata, then sends a start\n   * event to the backend for visualization.\n   * \n   * @param llm - Serialized LLM configuration object\n   * @param prompts - Array of input prompts being sent to the LLM\n   * @param runId - Unique identifier for this LLM run\n   * @param parentRunId - Optional parent run ID for nested operations\n   * @param extraParams - Additional parameters passed to the LLM\n   * @param tags - Optional tags for categorizing the run\n   * @param metadata - Optional metadata to include with the event\n   */\n  async handleLLMStart(\n    llm: Serialized,\n    prompts: string[],\n    runId: string,\n    parentRunId?: string,\n    extraParams?: Record<string, any>,\n    tags?: string[],\n    metadata?: Record<string, any>\n  ): Promise<void> {\n    const serialized = EventSerializer.serializeSerialized(llm);\n    const model = EventSerializer.extractModelName(llm);\n    console.log(\n      llm,\n      prompts,\n      runId,\n      parentRunId,\n      extraParams,\n      \"handleLLMStart parameters\"\n    );\n    // Store run data\n    this.runDataMap.set(runId, {\n      runId,\n      parentRunId,\n      nodeType: \"llm\",\n      startTime: Date.now(),\n      status: \"running\",\n      data: {\n        model,\n        prompts,\n        serialized\n      }\n    });\n\n    // Send event\n    const event: LLMStartEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId,\n      timestamp: Date.now(),\n      type: \"llm_start\",\n      model,\n      prompts,\n      invocationParams: extraParams,\n      metadata: {\n        ...this.config.metadata,\n        ...metadata,\n        tags\n      }\n    };\n    console.log(event, \"event\\n\\n\\n\\n\\n\\n\\n\");\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when an LLM finishes running\n   * \n   * This method is automatically invoked by LangChain when an LLM completes processing.\n   * It captures the output, calculates execution time, and sends an end event to the\n   * backend. It correlates with the corresponding start event using the runId.\n   * \n   * @param output - LLMResult containing the generated responses and token usage\n   * @param runId - Unique identifier matching the corresponding start event\n   */\n  async handleLLMEnd(output: LLMResult, runId: string): Promise<void> {\n    console.log(runId, \"runID\");\n    const runData = this.runDataMap.get(runId);\n    if (!runData) {\n      console.error(`[AgentTrace] No run data found for ${runId}`);\n      return;\n    }\n\n    const endTime = Date.now();\n    const latency = endTime - runData.startTime;\n\n    // Serialize output\n    const { response, tokens } = EventSerializer.serializeLLMResult(output);\n    const cost = EventSerializer.calculateCost(runData.data.model, tokens);\n\n    // Update run data\n    runData.endTime = endTime;\n    runData.status = \"complete\";\n\n    // Send event with reasoning data\n    const event: LLMEndEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId: runData.parentRunId,\n      timestamp: endTime,\n      type: \"llm_end\",\n      response,\n      tokens,\n      cost,\n      latency,\n      // Include reasoning collected from handleText\n      reasoning: runData.data.reasoning?.join('\\n'),\n      agentActions: runData.data.agentActions\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when a tool starts running\n   * \n   * This method is automatically invoked by LangChain when a tool begins execution.\n   * It captures the tool configuration, input parameters, and metadata, then sends\n   * a tool start event to the backend for visualization.\n   * \n   * @param tool - Serialized tool configuration or tool name string\n   * @param input - Input parameters passed to the tool\n   * @param runId - Unique identifier for this tool run\n   * @param parentRunId - Optional parent run ID for nested operations\n   * @param tags - Optional tags for categorizing the run\n   * @param metadata - Optional metadata to include with the event\n   */\n  async handleToolStart(\n    tool: Serialized,\n    input: string,\n    runId: string,\n    parentRunId?: string,\n    tags?: string[],\n    metadata?: Record<string, any>\n  ): Promise<void> {\n    // Handle both string tool names and serialized tool objects\n    let toolName: string;\n    if (typeof tool === 'string') {\n      toolName = tool;\n    } else {\n      const serialized = EventSerializer.serializeSerialized(tool);\n      toolName = serialized.name;\n    }\n    console.log(\"handleToolStart is running\");\n    // Store run data\n    this.runDataMap.set(runId, {\n      runId,\n      parentRunId,\n      nodeType: \"tool\",\n      startTime: Date.now(),\n      status: \"running\",\n      data: {\n        toolName,\n        input\n      }\n    });\n\n    // Send event\n    const event: ToolStartEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId,\n      timestamp: Date.now(),\n      type: \"tool_start\",\n      toolName,\n      input: EventSerializer.serializeToolInput(input),\n      metadata: {\n        ...this.config.metadata,\n        ...metadata,\n        tags\n      }\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when a tool finishes running\n   * \n   * This method is automatically invoked by LangChain when a tool completes execution.\n   * It captures the output, calculates execution time, and sends a tool end event to\n   * the backend. It correlates with the corresponding start event using the runId.\n   * \n   * @param output - The output result from the tool execution\n   * @param runId - Unique identifier matching the corresponding start event\n   */\n  async handleToolEnd(output: string, runId: string): Promise<void> {\n    const runData = this.runDataMap.get(runId);\n    if (!runData) {\n      console.error(`[AgentTrace] No run data found for ${runId}`);\n      return;\n    }\n\n    const endTime = Date.now();\n    const latency = endTime - runData.startTime;\n\n    // Calculate tool cost (tools typically have minimal execution costs)\n    const toolCost = EventSerializer.calculateToolCost(runData.data.toolName, latency);\n\n    // Update run data\n    runData.endTime = endTime;\n    runData.status = \"complete\";\n\n    // Send event with reasoning\n    const event: ToolEndEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId: runData.parentRunId,\n      timestamp: endTime,\n      type: \"tool_end\",\n      toolName: runData.data.toolName,\n      output,\n      cost: toolCost,\n      latency,\n      // Include reasoning collected from handleText\n      reasoning: runData.data.reasoning?.join('\\n'),\n      agentActions: runData.data.agentActions\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when chain starts running\n   */\n  async handleChainStart(\n    chain: Serialized,\n    inputs: Record<string, any>,\n    runId: string,\n    parentRunId?: string,\n    tags?: string[],\n    metadata?: Record<string, any>\n  ): Promise<void> {\n    const serialized = EventSerializer.serializeSerialized(chain);\n    const chainName = serialized.name;\n    console.log(\" handleChainStart is running\");\n    // Store run data\n    this.runDataMap.set(runId, {\n      runId,\n      parentRunId,\n      nodeType: \"chain\",\n      startTime: Date.now(),\n      status: \"running\",\n      data: {\n        chainName,\n        inputs\n      }\n    });\n\n    // Send event\n    const event: ChainStartEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId,\n      timestamp: Date.now(),\n      type: \"chain_start\",\n      chainName,\n      inputs,\n      metadata: {\n        ...this.config.metadata,\n        ...metadata,\n        tags\n      }\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when chain ends running\n   */\n  async handleChainEnd(\n    outputs: Record<string, any>,\n    runId: string\n  ): Promise<void> {\n    const runData = this.runDataMap.get(runId);\n    if (!runData) {\n      console.error(`[AgentTrace] No run data found for ${runId}`);\n      return;\n    }\n\n    const endTime = Date.now();\n    const latency = endTime - runData.startTime;\n\n    // Update run data\n    runData.endTime = endTime;\n    runData.status = \"complete\";\n\n    // Send event with reasoning\n    const event: ChainEndEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId: runData.parentRunId,\n      timestamp: endTime,\n      type: \"chain_end\",\n      chainName: runData.data.chainName,\n      outputs,\n      latency,\n      // Include reasoning collected from handleText\n      reasoning: runData.data.reasoning?.join('\\n'),\n      agentActions: runData.data.agentActions\n    };\n\n    this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when an error occurs\n   */\n  async handleLLMError(error: Error, runId: string): Promise<void> {\n    await this.handleError(error, runId);\n  }\n\n  async handleToolError(error: Error, runId: string): Promise<void> {\n    await this.handleError(error, runId);\n  }\n\n  async handleChainError(error: Error, runId: string): Promise<void> {\n    await this.handleError(error, runId);\n  }\n\n  private async handleError(error: Error, runId: string): Promise<void> {\n    const runData = this.runDataMap.get(runId);\n\n    if (runData) {\n      runData.status = \"error\";\n    }\n\n    const { message, stack } = EventSerializer.serializeError(error);\n\n    const event: ErrorEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId: runData?.parentRunId,\n      timestamp: Date.now(),\n      type: \"error\",\n      error: message,\n      stack\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when text is emitted during execution\n   * \n   * This captures LLM thinking, agent reasoning, and intermediate text outputs\n   */\n  async handleText(text: string, runId: string): Promise<void> {\n    const runData = this.runDataMap.get(runId);\n    \n    // Store reasoning text with the run data\n    if (runData) {\n      if (!runData.data.reasoning) {\n        runData.data.reasoning = [];\n      }\n      runData.data.reasoning.push(text);\n    }\n\n    // Send text event for real-time display\n    const event: TextEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId: runData?.parentRunId,\n      timestamp: Date.now(),\n      type: \"text\" as const,\n      text,\n      metadata: this.config.metadata\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when an agent takes an action\n   * \n   * This captures the agent's decision-making process, including:\n   * - What tool the agent chose to use\n   * - Why the agent made that choice\n   * - The reasoning behind the decision\n   */\n  async handleAgentAction(\n    action: any,\n    runId: string\n  ): Promise<void> {\n    const runData = this.runDataMap.get(runId);\n    \n    // Extract reasoning from the action\n    const reasoning = {\n      tool: action.tool,\n      toolInput: action.toolInput,\n      log: action.log, // This contains the agent's thinking!\n      messageLog: action.messageLog\n    };\n\n    // Store with run data\n    if (runData) {\n      if (!runData.data.agentActions) {\n        runData.data.agentActions = [];\n      }\n      runData.data.agentActions.push(reasoning);\n    }\n\n    // Send agent action event\n    const event: AgentActionEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId: runData?.parentRunId,\n      timestamp: Date.now(),\n      type: \"agent_action\" as const,\n      action: reasoning,\n      metadata: this.config.metadata\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when an agent completes execution\n   */\n  async handleAgentEnd(\n    output: any,\n    runId: string\n  ): Promise<void> {\n    const runData = this.runDataMap.get(runId);\n    \n    // Send agent end event with all collected reasoning\n    const event: AgentEndEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId: runData?.parentRunId,\n      timestamp: Date.now(),\n      type: \"agent_end\" as const,\n      output,\n      reasoning: runData?.data.reasoning,\n      agentActions: runData?.data.agentActions,\n      metadata: this.config.metadata\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when a retriever starts (for RAG systems)\n   */\n  async handleRetrieverStart(\n    retriever: Serialized,\n    query: string,\n    runId: string,\n    parentRunId?: string,\n    tags?: string[],\n    metadata?: Record<string, any>\n  ): Promise<void> {\n    const event: RetrieverStartEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      parentRunId,\n      timestamp: Date.now(),\n      type: \"retriever_start\" as const,\n      query,\n      metadata: {\n        ...this.config.metadata,\n        ...metadata,\n        tags\n      }\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Called when a retriever completes\n   */\n  async handleRetrieverEnd(\n    documents: any[],\n    runId: string\n  ): Promise<void> {\n    const event: RetrieverEndEvent = {\n      eventId: uuidv4(),\n      traceId: this.traceId,\n      runId,\n      timestamp: Date.now(),\n      type: \"retriever_end\" as const,\n      documents: documents.map(doc => ({\n        pageContent: doc.pageContent,\n        metadata: doc.metadata\n      })),\n      metadata: this.config.metadata\n    };\n\n    await this.client.sendEvent(event);\n  }\n\n  /**\n   * Get trace ID\n   */\n  public getTraceId(): string {\n    return this.traceId;\n  }\n\n  /**\n   * Check if connected to backend\n   */\n  public isConnected(): boolean {\n    return this.client.isConnected();\n  }\n\n  /**\n   * Cleanup and disconnect\n   */\n  public async cleanup(): Promise<void> {\n    this.client.disconnect();\n    this.runDataMap.clear();\n  }\n}\n","/**\n * Auto-detection utilities for Agent Trace\n * Automatically detects project configuration and sets up tracing\n */\n\n// Node.js specific imports - will be handled by bundler\nimport { TracingCallbackHandler } from './callback';\nimport { TraceConfig } from './types';\n\n/**\n * Auto-detect project configuration from .agent-trace/config.json\n */\nexport async function detectProjectConfig(): Promise<Partial<TraceConfig> | null> {\n  if (typeof (globalThis as any).window !== 'undefined') {\n    // Browser environment - return default config\n    return {\n      projectName: 'browser',\n      endpoint: 'http://localhost:3000',\n      debug: false\n    };\n  }\n\n  try {\n    const fs = await import('fs');\n    const path = await import('path');\n    \n    let currentDir = process.cwd();\n    const maxDepth = 10;\n    let depth = 0;\n\n    while (depth < maxDepth) {\n      const configPath = path.join(currentDir, '.agent-trace', 'config.json');\n      \n      if (fs.existsSync(configPath)) {\n        try {\n          const config = JSON.parse(fs.readFileSync(configPath, 'utf8'));\n          return {\n            projectName: config.project,\n            endpoint: `http://${config.backend.host}:${config.backend.port}`,\n            debug: false\n          };\n        } catch (error) {\n          console.warn('[AgentTrace] Failed to parse config file:', error);\n          return null;\n        }\n      }\n\n      const parentDir = path.resolve(currentDir, '..');\n      if (parentDir === currentDir) {\n        break;\n      }\n\n      currentDir = parentDir;\n      depth++;\n    }\n\n    return null;\n  } catch (error) {\n    console.warn('[AgentTrace] Failed to load fs/path modules:', error);\n    return null;\n  }\n}\n\n/**\n * Auto-detect project name from package.json\n */\nexport async function detectProjectName(): Promise<string> {\n  if (typeof (globalThis as any).window !== 'undefined') {\n    return 'browser';\n  }\n\n  try {\n    const fs = await import('fs');\n    const path = await import('path');\n    \n    let currentDir = process.cwd();\n    const maxDepth = 10;\n    let depth = 0;\n\n    while (depth < maxDepth) {\n      const packageJsonPath = path.join(currentDir, 'package.json');\n      \n      if (fs.existsSync(packageJsonPath)) {\n        try {\n          const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf8'));\n          return packageJson.name || 'default';\n        } catch (error) {\n          console.warn('[AgentTrace] Failed to parse package.json:', error);\n          return 'default';\n        }\n      }\n\n      const parentDir = path.resolve(currentDir, '..');\n      if (parentDir === currentDir) {\n        break;\n      }\n\n      currentDir = parentDir;\n      depth++;\n    }\n\n    return 'default';\n  } catch (error) {\n    console.warn('[AgentTrace] Failed to load fs/path modules:', error);\n    return 'default';\n  }\n}\n\n/**\n * Create a tracer with auto-detected configuration\n */\nexport async function createAutoTracer(overrides?: Partial<TraceConfig>): Promise<TracingCallbackHandler> {\n  // First try to detect from .agent-trace/config.json\n  let config = await detectProjectConfig();\n  \n  // If not found, use package.json name and default endpoint\n  if (!config) {\n    config = {\n      projectName: await detectProjectName(),\n      endpoint: 'http://localhost:3000',\n      debug: false\n    };\n  }\n\n  // Apply any overrides\n  const finalConfig = {\n    ...config,\n    ...overrides\n  };\n\n  return new TracingCallbackHandler(finalConfig);\n}\n\n/**\n * Check if Agent Trace is properly configured in the current project\n */\nexport async function isAgentTraceConfigured(): Promise<boolean> {\n  const config = await detectProjectConfig();\n  return config !== null;\n}\n\n/**\n * Get configuration status for debugging\n */\nexport async function getConfigurationStatus(): Promise<{\n  configured: boolean;\n  projectName: string;\n  endpoint: string;\n  source: 'config-file' | 'package-json' | 'default';\n}> {\n  const config = await detectProjectConfig();\n  \n  if (config) {\n    return {\n      configured: true,\n      projectName: config.projectName || 'default',\n      endpoint: config.endpoint || 'http://localhost:3000',\n      source: 'config-file'\n    };\n  }\n\n  const projectName = await detectProjectName();\n  return {\n    configured: false,\n    projectName,\n    endpoint: 'http://localhost:3000',\n    source: projectName === 'default' ? 'default' : 'package-json'\n  };\n}\n","/**\n * Public API exports\n */\nimport { TracingCallbackHandler } from \"./callback\";\nimport type { TraceConfig } from \"./types\";\n\n// Export classes (so users can import them)\nexport { TracingCallbackHandler } from \"./callback\";\nexport { TraceClient } from \"./client\";\nexport { EventSerializer } from \"./serializer\";\n\n// Export auto-detection utilities\nexport { \n  createAutoTracer,\n  detectProjectConfig,\n  detectProjectName,\n  isAgentTraceConfigured,\n  getConfigurationStatus\n} from \"./auto-detection\";\n\nexport type {\n  TraceConfig,\n  TraceEvent,\n  LLMStartEvent,\n  LLMEndEvent,\n  ToolStartEvent,\n  ToolEndEvent,\n  ChainStartEvent,\n  ChainEndEvent,\n  ErrorEvent,\n  NodeType,\n  NodeStatus,\n  RunData\n} from \"./types\";\n\n/**\n * Convenience function to create a tracer\n */\nexport function createTracer(config?: Partial<TraceConfig>) {\n  return new TracingCallbackHandler(config);\n}\n"],"names":["camelcaseModule","uuid","io","uuidv4"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}